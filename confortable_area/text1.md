# QGISで住みやすいエリアを解析する！ 第１話

QGISで視覚的解析をします．本稿の目的は備忘録です．

## QGISの基本操作

QGISはベクタ，ラスタに対して関数を適用することが主な操作になります．<br>
ただ，QGISは操作１つ１つが極めて基礎的なので，組み合わせ技を習得するのが大変です．<br>
そこで今回はQGISでできる基本的な操作を学ぶ感じで行きます．

---

## ベクタ編

`ベクタ`レイヤーに適用できる，いろいろな関数があります．

### [関数] buffer

`ベクタ`レイヤと`半径`を入力することで，`ポリゴン`レイヤを生み出します．

> 領域展開したいときに使う．
> 要は近接性を可視化したいとき．

### [関数] intersect

2つの`ベクタ`レイヤを入力することで，共通部分の`ベクタ`レイヤを生み出します．

> ANDをとりたいときに使う．

### [関数] clip

2つの`ベクタ`レイヤでクリッピングマスクして，`ベクタ`レイヤを生み出します．

> ANDを取りたいときに使う．

### [関数] merge

2つの`ベクタ`レイヤを合わせて，大きい`ベクタ`レイヤを生み出します．

> だいたい，市区町村ポリゴンから都道府県ポリゴンしたいときに，`マージ`＋`ディゾルブ`して使う．
> あとは，同じ意味をもつレイヤ同士を，1つのレイヤにくっつけたいときかな．

### [関数] dissolve

1つの`ベクタ`レイヤを入力することで，レイヤに含まれるフィーチャを1つに融合した`ベクタ`レイヤを出力します．

> これはアーーーッ！融合してェーーーッ！ってときに使う．
> （要するに，区分分けが必要ないと判断したとき）

---

## ラスタ編

### 補足：ラスタデータの種類

`ラスタ`データには`連続数値データ` `カテゴリデータ` `イメージデータ`の3つの種類がある．

#### 1. 連続数値データ

> 代表的な`数値情報データ`はDEMデータだ．
> `数値情報データ`＝`DEMデータ`ではない．

#### 2. カテゴリデータ

> 代表的な`カテゴリデータ`は土地利用図だ．

#### 3. イメージデータ

> 代表的な`イメージデータ`は衛生写真だ．

### 本編：ラスタ関数

`ラスタ`レイヤーに適用できる，いろいろな関数があります．

> 正直[GISオープン教材](https://gis-oer.github.io/gitbook/book/materials/15/15.html)のほうがわかりやすいので，こちら推奨．

### [関数] 陰影起伏図（hillshade）

`ラスタ`から`ラスタ`を生み出す．

> ガチプロはHillshadeと呼ぶらしい．主に観賞用．

### [関数] 傾斜区分図

`ラスタ`から`ラスタ`を生み出す．

> DEMデータを微分したいとき．

### [関数] 傾斜方位図

`ラスタ`から`ラスタ`を生み出す．

> 微分の向きが気になるとき．（要するにあまり使わない．）

### [機能] ラスタ演算

`ラスタ`から`ラスタ`を生み出す．

> 条件に合致した`ラスタ`の層を抽出するのに使う．
> 
> 例1：0〜50の間の`連続数値データ`のうち，10から30のゾーンだけ取り出したい．<br>
> 例2：`カテゴリデータ`の土地利用図のうち，特定のゾーンだけ取り出したい．
> 
> このように，ラスタによって条件抽出するのに使える．

### [技術] フォーカル統計

`ラスタ`から`ラスタ`を生み出す．

> QGISでは，プラグインにある`地域統計`から利用可能．  
> 周辺$n ^ 2 - 1$セルを重みなしで足し算したヤツを，真ん中のセルに格納する処理
> 
> 例: 人口分布ラスタを入力すると，集客人数ラスタが作れる．これをスーパーマーケットのポイントデータと重ねれば、、、！

> 合計以外にも，平均もできる．これでボカシも可能ってこった．

---

## ベクタ＋ラスタ融合技

### [関数] 累積距離

`ポイント`から`ラスタ`を生み出す．

> 最寄りの`ポイント`からどれだけ離れているかを，`ラスタ`で表現．

---

## 内挿・密度編

`ポイント`レイヤをフンワリと，`ラスタ`レイヤにするのに使う．

> 無から`ラスタ`を生成する上で重要なのは，セルサイズ．座標系のように，統一するのが望ましい．

### [関数] Spline（内挿）
### [関数] IDW（内挿）
### [関数] Kriging（内挿）

初心者のうちは，使い分けはどうでもいい．とにかく`ラスタ`レイヤを作りたいときは`Kriging`しとこう．

### [関数] 点密度（密度）
> 距離減衰しないやつ

### [関数] Kernel Density（密度）
> 距離減衰するやつ

密度は，近接効果とかをフンワリしたいときに使うイメージ．内挿よりメリハリがある．






