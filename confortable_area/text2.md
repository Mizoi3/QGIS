# QGISで住みやすいエリアを解析する！ 第２話

あー，今回はGISソフト全般で難関とされる，**ラスタデータの操作**を扱います．  
ベクタデータの操作は簡単なので，papaっと覚えてくれさい．

今回は立地分析です！

## 目的
買い物困難地域を抽出する．

## データ
* 宮城県のスーパーのポイントデータ
* 宮城県の国勢調査のポリゴンデータ

**スーパーのポイントデータの作り方**
```
1. スクレイピングによりスーパーの住所をcsvで獲得  
2. アドレスマッチングして，`緯度経度を持つcsv`にする．
```

**国勢調査のポリゴンデータの作り方**
```
1. e-Statから国勢調査のcsvを獲得
2. 国土数値情報から行政区域のshpを獲得
3. テーブル結合で，shpに対してcsvを融合．
```

## 実装方法

### **[STEP1] 人口分布ラスタを作る．**

(1) `国勢調査のポリゴンデータ`の属性テーブルに，カラム`PopDen`を作る．

> (PopDen =) "Jinko" / "Area" * 100

(2) `ベクタ`から`ラスタ`に変換する．

> 適当に頑張る．

### **[STEP2] フォーカル統計で近傍人口ラスタを作る．**

> フォーカル統計を使って，半径1000mの人口の`合計`を表すラスタを生み出す．
> 入力ラスタ：`人口分布ラスタ`，形状：円とするとよい．

### **[STEP3] ラスタ計算機で階層化する**

> 下位25%を**買い物困難地域**とし，階層化する．
> 
> ("`買い物困難地域ラスタ`" =) "`集客見込み人数ラスタ`" < 124

### **[STEP4] スーパーのポイントデータから，バッファを生やす．**

> 黒色にして，塗りつぶそう．

## 結果

![結果](aaa)
